# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-15 on `darwin-arm64`

All benchmarks: warm cache (`--warmup 3`), 5 runs, output to pipe. NDJSON uses parallel processing.
Median of 5 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `-c '.'` | twitter.json | **2.7ms** | 17.2ms | 8.7ms | 9.8ms |
| `-c '.statuses'` | twitter.json | **4.7ms** | 18.5ms | 8.1ms | 8.9ms |
| `'.statuses|length'` | twitter.json | **2.8ms** | 10.3ms | 5.5ms | 8.1ms |
| `'.statuses[]|.user.name'` | twitter.json | **4.8ms** | 10.3ms | 5.7ms | 8.6ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | twitter.json | **7.6ms** | 10.5ms | 6.8ms | 10.1ms |
| `'[.statuses[]|.retweet_count|floor]'` | twitter.json | **5.7ms** | 9.8ms | 7.0ms | 8.2ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | twitter.json | **4.8ms** | 11.1ms | 7.3ms | 8.1ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | twitter.json | **1.5ms** | 7.4ms | 3.8ms | 6.2ms |
| `'[paths(scalars)]|length'` | twitter.json | **9.1ms** | 18.9ms | 18.7ms | 20.4ms |
| `'.statuses[0]|map_values(tojson)'` | twitter.json | **4.6ms** | 10.9ms | 6.1ms | 8.4ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | twitter.json | **4.3ms** | 11.5ms | 6.8ms | 8.4ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | twitter.json | **4.5ms** | 11.7ms | 6.5ms | 8.8ms |
| `'[.statuses[].user.screen_name][:5]'` | twitter.json | **6.2ms** | 10.2ms | 6.4ms | 8.8ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | twitter.json | **5.2ms** | 10.2ms | 6.2ms | 8.3ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | twitter.json | **4.3ms** | 10.7ms | 7.7ms | 9.0ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | twitter.json | **7.6ms** | 38.1ms | 25.6ms | 20.7ms |
| `-c '.statuses[0].retweet_count |= . + 1'` | twitter.json | **6.5ms** | 17.3ms | 7.7ms | 9.9ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | twitter.json | **5.2ms** | 19.5ms | 7.9ms | 10.5ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | twitter.json | **6.2ms** | 11.9ms | 6.8ms | 9.8ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | twitter.json | **5.3ms** | 11.9ms | 7.6ms | 8.1ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | twitter.json | **4.2ms** | 10.8ms | 7.3ms | 9.6ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | twitter.json | **4.6ms** | 11.2ms | 7.3ms | 8.9ms |
| `-c '.'` | large_twitter.json | **22.5ms** | 1.17s | 256.3ms | 476.3ms |
| `-c '.statuses'` | large_twitter.json | **226.8ms** | 1.18s | 249.1ms | 468.5ms |
| `'.statuses|length'` | large_twitter.json | **33.9ms** | 361.9ms | 152.8ms | 305.5ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **158.2ms** | 374.0ms | 163.0ms | 316.6ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **161.2ms** | 385.7ms | 172.4ms | 323.7ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **160.3ms** | 368.8ms | 156.4ms | 308.0ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **160.9ms** | 390.9ms | 191.7ms | 314.7ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **163.4ms** | 377.8ms | 157.2ms | 313.2ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **372.8ms** | 1.38s | 1.36s | 1.55s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **157.3ms** | 367.3ms | 154.3ms | 299.9ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **160.0ms** | 370.1ms | 158.5ms | 309.1ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **164.5ms** | 380.0ms | 168.9ms | 318.0ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **157.9ms** | 368.7ms | 155.8ms | 307.8ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **157.8ms** | 376.3ms | 158.4ms | 304.9ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **157.5ms** | 371.8ms | 163.7ms | 307.3ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **388.4ms** | 3.52s | 2.09s | 1.63s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **210.0ms** | 1.15s | 258.3ms | 467.5ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **219.5ms** | 1.18s | 254.0ms | 490.7ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **177.1ms** | 421.8ms | 201.5ms | 333.4ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **164.6ms** | 393.2ms | 174.5ms | 317.2ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **159.4ms** | 375.8ms | 166.9ms | 313.9ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **168.5ms** | 371.6ms | 162.4ms | 309.2ms |

### NDJSON (parallel processing)

qj processes NDJSON in parallel across all cores using rayon.

| Filter | File | **qj** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `'.name'` | 100k.ndjson | **24.7ms** | 122.4ms | 65.0ms | 179.7ms |
| `-c '.'` | 100k.ndjson | **29.0ms** | 249.1ms | 76.5ms | 220.3ms |
| `-c 'select(.score>50)|{name,score}'` | 100k.ndjson | **31.3ms** | 160.7ms | 121.1ms | 184.1ms |
| `'.name'` | 1m.ndjson | **125.2ms** | 1.15s | 607.0ms | 1.73s |
| `-c '.'` | 1m.ndjson | **135.2ms** | 2.47s | 700.2ms | 2.15s |
| `-c 'select(.score>50)|{name,score}'` | 1m.ndjson | **143.7ms** | 1.55s | 1.16s | 1.78s |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | jq | jaq | gojq |
|------|------|------|------|
| **2.1 GB/s** | 42 MB/s | 191 MB/s | 103 MB/s |

### Summary (times faster than jq)

| Category | **qj** | jaq | gojq |
|----------|------|------|------|
| JSON (large_twitter.json) | **3.5x** | 2.5x | 1.4x |
| NDJSON (1m.ndjson) | **12.2x** | 2.1x | 0.9x |

Geometric mean of per-filter speedups (median time). Higher is better.
