# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-16 on `Apple M4 Pro (48 GB)`

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | qj (1T) | jq | jaq | gojq |
|--------|------|------|------|------|------|------|
| `-c '.'` | large_twitter.json | **21.3ms** | 20.9ms | 1.17s | 252.1ms | 465.9ms |
| `-c '.statuses'` | large_twitter.json | **218.8ms** | 213.6ms | 1.16s | 249.5ms | 468.5ms |
| `'.statuses|length'` | large_twitter.json | **39.5ms** | 35.7ms | 462.8ms | 155.6ms | 298.8ms |
| `-c 'keys'` | large_twitter.json | **35.6ms** | 35.4ms | 368.9ms | 160.7ms | 307.9ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **113.5ms** | 108.2ms | 383.9ms | 168.3ms | 314.3ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **39.2ms** | 40.0ms | 382.7ms | 177.4ms | 321.6ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **54.3ms** | 55.4ms | 658.5ms | 203.9ms | 368.5ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **60.9ms** | 59.3ms | 701.4ms | 213.0ms | 377.8ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **37.4ms** | 36.9ms | 374.5ms | 174.1ms | 306.7ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **36.4ms** | 36.7ms | 379.4ms | 163.6ms | 313.8ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **129.1ms** | 122.4ms | 401.3ms | 180.8ms | 326.1ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **103.0ms** | 97.9ms | 372.9ms | 149.0ms | 301.0ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **114.3ms** | 110.0ms | 394.8ms | 200.4ms | 311.5ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **182.7ms** | 161.8ms | 375.8ms | 164.8ms | 310.7ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **327.0ms** | 321.8ms | 1.39s | 1.37s | 1.58s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **179.9ms** | 167.1ms | 377.0ms | 160.9ms | 308.2ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **161.4ms** | 157.2ms | 388.3ms | 166.7ms | 314.9ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **156.5ms** | 153.5ms | 416.9ms | 173.6ms | 315.4ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **161.8ms** | 160.0ms | 372.8ms | 159.8ms | 309.1ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **109.3ms** | 104.9ms | 373.1ms | 161.5ms | 306.3ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **152.7ms** | 151.2ms | 377.2ms | 164.9ms | 313.3ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **368.0ms** | 363.2ms | 3.55s | 2.13s | 1.63s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **216.9ms** | 225.4ms | 1.18s | 251.5ms | 474.9ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **232.8ms** | 225.8ms | 1.23s | 257.9ms | 504.5ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **117.6ms** | 114.0ms | 435.7ms | 203.7ms | 345.6ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **161.4ms** | 156.0ms | 399.1ms | 169.2ms | 327.2ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **106.6ms** | 106.1ms | 389.2ms | 175.0ms | 339.7ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **191.3ms** | 187.2ms | 402.1ms | 232.4ms | 324.0ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **173.2ms** | 163.6ms | 393.9ms | 169.7ms | 313.9ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **167.8ms** | 232.5ms | 385.4ms | 173.3ms | 312.8ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | qj (1T) | jq | jaq | gojq |
|------|------|------|------|------|
| **2.2 GB/s** | 2.3 GB/s | 42 MB/s | 194 MB/s | 105 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **4.7x** | 4.8x | 2.5x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
