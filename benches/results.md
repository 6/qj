# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-16 on `Apple M4 Pro (48 GB)`

All benchmarks: warm cache (`--warmup 3`), 3 runs, output to pipe. NDJSON uses parallel processing.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `-c '.'` | twitter.json | **14.5ms** | 17.5ms | 7.4ms | 10.0ms |
| `-c '.statuses'` | twitter.json | **15.0ms** | 17.0ms | 7.5ms | 8.8ms |
| `'.statuses|length'` | twitter.json | **13.1ms** | 10.2ms | 5.1ms | 6.9ms |
| `'.statuses[]|.user.name'` | twitter.json | **15.7ms** | 9.5ms | 7.4ms | 8.3ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | twitter.json | **16.0ms** | 10.6ms | 7.8ms | 9.7ms |
| `'[.statuses[]|.retweet_count|floor]'` | twitter.json | **15.3ms** | 11.1ms | 6.9ms | 9.0ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | twitter.json | **16.3ms** | 11.6ms | 7.7ms | 8.4ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | twitter.json | **15.7ms** | 11.4ms | 6.3ms | 8.2ms |
| `'[paths(scalars)]|length'` | twitter.json | **18.3ms** | 18.8ms | 17.7ms | 21.4ms |
| `'.statuses[0]|map_values(tojson)'` | twitter.json | **15.9ms** | 10.4ms | 7.0ms | 10.0ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | twitter.json | **14.0ms** | 10.0ms | 7.2ms | 9.7ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | twitter.json | **16.5ms** | 11.5ms | 6.8ms | 9.9ms |
| `'[.statuses[].user.screen_name][:5]'` | twitter.json | **15.2ms** | 10.6ms | 8.3ms | 8.8ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | twitter.json | **16.1ms** | 10.6ms | 5.9ms | 8.2ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | twitter.json | **15.1ms** | 10.0ms | 6.4ms | 7.9ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | twitter.json | **17.5ms** | 37.9ms | 24.5ms | 22.6ms |
| `-c '.statuses[0].retweet_count |= . + 1'` | twitter.json | **18.3ms** | 19.6ms | 9.4ms | 9.7ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | twitter.json | **16.7ms** | 17.4ms | 7.4ms | 10.4ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | twitter.json | **14.4ms** | 10.7ms | 6.4ms | 8.0ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | twitter.json | **13.9ms** | 11.8ms | 6.2ms | 7.7ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | twitter.json | **15.4ms** | 9.5ms | 5.3ms | 7.8ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | twitter.json | **15.0ms** | 12.2ms | 7.3ms | 9.1ms |
| `-c '.'` | large_twitter.json | **30.1ms** | 1.14s | 247.6ms | 469.9ms |
| `-c '.statuses'` | large_twitter.json | **214.3ms** | 1.15s | 244.6ms | 472.6ms |
| `'.statuses|length'` | large_twitter.json | **46.4ms** | 360.2ms | 149.7ms | 296.1ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **167.9ms** | 369.4ms | 166.3ms | 309.9ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **170.3ms** | 377.0ms | 160.9ms | 309.9ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **169.7ms** | 366.1ms | 154.6ms | 302.0ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **172.6ms** | 385.4ms | 191.1ms | 312.6ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **168.3ms** | 377.7ms | 158.4ms | 305.3ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **370.1ms** | 1.36s | 1.35s | 1.55s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **160.4ms** | 360.9ms | 156.0ms | 310.7ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **169.5ms** | 367.7ms | 156.9ms | 311.5ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **171.3ms** | 384.4ms | 178.5ms | 320.3ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **161.0ms** | 376.3ms | 156.8ms | 306.8ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **164.0ms** | 373.8ms | 156.0ms | 308.4ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **167.3ms** | 368.7ms | 158.6ms | 306.8ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **393.3ms** | 3.54s | 2.09s | 1.62s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **222.8ms** | 1.13s | 247.6ms | 469.3ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **226.5ms** | 1.18s | 255.6ms | 497.2ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **175.6ms** | 420.3ms | 204.1ms | 330.4ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **171.8ms** | 390.2ms | 171.3ms | 312.1ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **168.8ms** | 364.5ms | 162.0ms | 301.0ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **174.9ms** | 372.9ms | 165.8ms | 302.9ms |

### NDJSON (parallel processing)

qj processes NDJSON in parallel across all cores using rayon.

| Filter | File | **qj** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `'.name'` | 100k.ndjson | **18.3ms** | 120.6ms | 64.5ms | 175.1ms |
| `-c '.'` | 100k.ndjson | **37.4ms** | 243.6ms | 75.8ms | 222.7ms |
| `-c 'select(.score>50)|{name,score}'` | 100k.ndjson | **24.6ms** | 162.8ms | 124.3ms | 174.8ms |
| `'.name'` | 1m.ndjson | **31.6ms** | 1.16s | 600.3ms | 1.75s |
| `-c '.'` | 1m.ndjson | **149.2ms** | 2.45s | 694.3ms | 2.09s |
| `-c 'select(.score>50)|{name,score}'` | 1m.ndjson | **61.3ms** | 1.56s | 1.15s | 1.76s |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | jq | jaq | gojq |
|------|------|------|------|
| **1.6 GB/s** | 43 MB/s | 198 MB/s | 104 MB/s |

### Summary (times faster than jq)

| Category | **qj** | jaq | gojq |
|----------|------|------|------|
| JSON (large_twitter.json) | **3.3x** | 2.5x | 1.4x |
| NDJSON (1m.ndjson) | **24.8x** | 2.1x | 0.9x |

Geometric mean of per-filter speedups (median time). Higher is better.
