# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-16 on `Apple M4 Pro (48 GB)`

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | qj (1T) | jq | jaq | gojq |
|--------|------|------|------|------|------|------|
| `-c '.'` | large_twitter.json | **21.3ms** | 22.2ms | 1.17s | 258.2ms | 473.8ms |
| `-c '.statuses'` | large_twitter.json | **246.8ms** | 241.5ms | 1.23s | 250.4ms | 485.9ms |
| `'.statuses|length'` | large_twitter.json | **35.2ms** | 35.4ms | 368.8ms | 162.6ms | 313.5ms |
| `-c 'keys'` | large_twitter.json | **33.3ms** | 33.5ms | 374.9ms | 155.8ms | 300.1ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **104.9ms** | 103.4ms | 378.8ms | 163.1ms | 319.9ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **39.1ms** | 39.0ms | 378.3ms | 164.5ms | 320.1ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **75.0ms** | 83.6ms | 680.6ms | 201.7ms | 369.0ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **51.2ms** | 50.4ms | 697.7ms | 207.7ms | 371.8ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **53.4ms** | 53.0ms | 380.2ms | 184.7ms | 308.9ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **36.1ms** | 35.5ms | 382.2ms | 161.1ms | 308.7ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **191.6ms** | 185.2ms | 386.5ms | 170.0ms | 321.3ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **108.8ms** | 109.0ms | 369.0ms | 160.7ms | 301.8ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **105.8ms** | 106.0ms | 394.0ms | 191.6ms | 313.2ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **179.6ms** | 177.2ms | 378.8ms | 162.7ms | 314.5ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **396.8ms** | 389.7ms | 1.39s | 1.36s | 1.56s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **175.9ms** | 173.2ms | 368.8ms | 155.2ms | 305.6ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **164.4ms** | 161.7ms | 371.8ms | 163.1ms | 305.6ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **168.5ms** | 167.3ms | 384.5ms | 171.0ms | 317.8ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **178.7ms** | 180.1ms | 370.2ms | 160.0ms | 305.3ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **161.1ms** | 161.5ms | 379.4ms | 161.3ms | 309.8ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **162.1ms** | 160.2ms | 378.8ms | 162.7ms | 311.1ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **411.2ms** | 414.7ms | 3.52s | 2.13s | 1.63s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **230.4ms** | 229.8ms | 1.17s | 249.5ms | 471.5ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **240.3ms** | 243.8ms | 1.22s | 257.3ms | 490.7ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **118.1ms** | 117.5ms | 423.8ms | 201.5ms | 336.9ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **167.8ms** | 166.5ms | 395.9ms | 169.3ms | 317.3ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **108.4ms** | 103.9ms | 392.7ms | 168.7ms | 306.5ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **196.6ms** | 193.5ms | 391.5ms | 183.3ms | 313.8ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **187.3ms** | 184.8ms | 383.9ms | 170.4ms | 309.2ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **170.3ms** | 173.6ms | 375.2ms | 164.8ms | 307.3ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | qj (1T) | jq | jaq | gojq |
|------|------|------|------|------|
| **2.2 GB/s** | 2.2 GB/s | 42 MB/s | 190 MB/s | 103 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **4.4x** | 4.4x | 2.5x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
