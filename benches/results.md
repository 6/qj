# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-15 on `darwin-arm64`

All benchmarks: warm cache (`--warmup 3`), 5 runs, output to pipe. NDJSON uses parallel processing.
Median of 5 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **jx** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `-c '.'` | twitter.json | **2.6ms** | 17.1ms | 6.2ms | 8.9ms |
| `-c '.statuses'` | twitter.json | **3.8ms** | 17.2ms | 6.8ms | 9.6ms |
| `'.statuses|length'` | twitter.json | **2.9ms** | 9.4ms | 5.1ms | 7.0ms |
| `'.statuses[]|.user.name'` | twitter.json | **4.0ms** | 10.0ms | 5.8ms | 6.6ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | twitter.json | **3.8ms** | 9.9ms | 5.2ms | 7.3ms |
| `'[.statuses[]|.retweet_count|floor]'` | twitter.json | **4.0ms** | 8.9ms | 5.4ms | 7.2ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | twitter.json | **4.9ms** | 11.3ms | 7.5ms | 16.3ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | twitter.json | **4.1ms** | 9.9ms | 5.6ms | 6.6ms |
| `'[paths(scalars)]|length'` | twitter.json | **6.3ms** | 20.1ms | 17.8ms | 19.4ms |
| `'.statuses[0]|map_values(tojson)'` | twitter.json | **3.9ms** | 10.3ms | 6.7ms | 7.4ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | twitter.json | **3.3ms** | 8.9ms | 5.3ms | 6.7ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | twitter.json | **3.8ms** | 10.7ms | 5.9ms | 7.5ms |
| `'[.statuses[].user.screen_name][:5]'` | twitter.json | **4.4ms** | 11.3ms | 6.1ms | 7.4ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | twitter.json | **4.4ms** | 10.4ms | 6.2ms | 7.5ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | twitter.json | **4.7ms** | 8.9ms | 5.0ms | 6.6ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | twitter.json | **9.3ms** | 50.2ms | 36.5ms | 28.2ms |
| `-c '.statuses[0].retweet_count |= . + 1'` | twitter.json | **4.5ms** | 30.3ms | <0.1ms | <0.1ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | twitter.json | **4.8ms** | 17.8ms | 6.9ms | 9.6ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | twitter.json | **16.6ms** | 9.0ms | 2.3ms | 15.0ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | twitter.json | **<0.1ms** | 5.2ms | 1.4ms | 2.8ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | twitter.json | **<0.1ms** | <0.1ms | 2.3ms | 9.4ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | twitter.json | **4.4ms** | 10.5ms | 5.7ms | 7.0ms |
| `-c '.'` | large_twitter.json | **23.8ms** | 1.37s | 291.9ms | 506.7ms |
| `-c '.statuses'` | large_twitter.json | **205.7ms** | 1.21s | 271.6ms | 455.8ms |
| `'.statuses|length'` | large_twitter.json | **31.9ms** | 406.1ms | 172.8ms | 296.4ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **160.0ms** | 413.3ms | 179.7ms | 304.8ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **165.4ms** | 454.6ms | 194.0ms | 317.2ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **162.7ms** | 419.8ms | 178.3ms | 304.8ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **175.8ms** | 455.7ms | 226.8ms | 293.1ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **152.4ms** | 414.3ms | 170.6ms | 295.7ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **370.8ms** | 1.56s | 1.84s | 1.64s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **160.6ms** | 408.3ms | 182.6ms | 296.6ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **160.5ms** | 413.4ms | 182.5ms | 295.5ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **161.1ms** | 429.2ms | 194.3ms | 309.0ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **154.4ms** | 411.3ms | 176.0ms | 294.2ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **157.8ms** | 418.1ms | 177.6ms | 296.6ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **169.1ms** | 475.1ms | 205.3ms | 384.1ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **361.2ms** | 3.60s | 2.45s | 1.60s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **209.4ms** | 1.17s | 247.6ms | 432.2ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **211.7ms** | 1.25s | 270.4ms | 477.9ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **170.5ms** | 460.1ms | 221.1ms | 321.2ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **154.4ms** | 424.6ms | 185.8ms | 306.1ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **157.8ms** | 415.3ms | 179.9ms | 299.5ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **170.9ms** | 418.8ms | 180.9ms | 304.8ms |

### NDJSON (parallel processing)

jx processes NDJSON in parallel across all cores using rayon.

| Filter | File | **jx** | jq | jaq | gojq |
|--------|------|------|------|------|------|
| `'.name'` | 100k.ndjson | **25.5ms** | 141.3ms | 75.0ms | 169.5ms |
| `-c '.'` | 100k.ndjson | **49.3ms** | 275.1ms | 93.6ms | 188.4ms |
| `-c 'select(.score>50)|{name,score}'` | 100k.ndjson | **29.1ms** | 176.2ms | 134.8ms | 172.9ms |
| `'.name'` | 1m.ndjson | **119.2ms** | 1.26s | 697.0ms | 1.65s |
| `-c '.'` | 1m.ndjson | **133.9ms** | 2.61s | 1.01s | 3.06s |
| `-c 'select(.score>50)|{name,score}'` | 1m.ndjson | **153.7ms** | 2.03s | 1.28s | 1.65s |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **jx** | jq | jaq | gojq |
|------|------|------|------|
| **2.0 GB/s** | 36 MB/s | 168 MB/s | 97 MB/s |

### Summary (times faster than jq)

| Category | **jx** | jaq | gojq |
|----------|------|------|------|
| JSON (large_twitter.json) | **3.9x** | 2.4x | 1.6x |
| NDJSON (1m.ndjson) | **14.0x** | 2.0x | 0.9x |

Geometric mean of per-filter speedups (median time). Higher is better.
