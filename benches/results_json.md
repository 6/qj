# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools`. Do not edit manually.
> Last updated: 2026-02-16 on `Apple M4 Pro (48 GB)`

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|--------|------|------:|------:|------:|------:|------:|------:|------:|
| `-c '.'` | large_twitter.json | **20.2ms** | **57.1x** | 20.2ms | 57.1x | 1.16s | 251.8ms | 463.7ms |
| `-c '.statuses'` | large_twitter.json | **207.9ms** | **5.6x** | 206.2ms | 5.7x | 1.17s | 249.1ms | 472.0ms |
| `'.statuses|length'` | large_twitter.json | **34.3ms** | **10.6x** | 33.3ms | 10.9x | 364.4ms | 155.7ms | 299.1ms |
| `-c 'keys'` | large_twitter.json | **34.2ms** | **10.5x** | 34.8ms | 10.3x | 359.7ms | 152.3ms | 297.4ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **102.2ms** | **3.6x** | 100.9ms | 3.7x | 371.2ms | 159.3ms | 314.4ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **36.6ms** | **10.1x** | 36.1ms | 10.3x | 371.8ms | 158.3ms | 314.8ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **51.5ms** | **12.6x** | 50.3ms | 12.8x | 646.7ms | 193.9ms | 364.3ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **56.2ms** | **12.3x** | 55.5ms | 12.4x | 688.1ms | 210.8ms | 374.6ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **34.4ms** | **10.9x** | 38.0ms | 9.9x | 375.0ms | 170.0ms | 306.4ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **35.9ms** | **10.4x** | 34.7ms | 10.7x | 372.3ms | 158.5ms | 302.5ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **113.3ms** | **3.4x** | 114.6ms | 3.4x | 384.6ms | 169.3ms | 318.7ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **110.1ms** | **3.4x** | 108.8ms | 3.5x | 375.7ms | 158.2ms | 305.4ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **104.6ms** | **3.7x** | 101.3ms | 3.8x | 387.8ms | 194.5ms | 304.5ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **158.5ms** | **2.4x** | 155.9ms | 2.4x | 375.9ms | 160.7ms | 312.0ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **301.5ms** | **4.6x** | 304.8ms | 4.5x | 1.38s | 1.37s | 1.56s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **157.9ms** | **2.4x** | 163.6ms | 2.3x | 380.7ms | 156.2ms | 301.2ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **149.0ms** | **2.5x** | 147.3ms | 2.5x | 374.8ms | 156.1ms | 308.6ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **152.0ms** | **2.5x** | 151.4ms | 2.6x | 387.2ms | 171.8ms | 318.1ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **105.0ms** | **3.7x** | 108.2ms | 3.6x | 384.2ms | 163.3ms | 316.6ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **107.0ms** | **3.5x** | 103.8ms | 3.6x | 376.7ms | 157.9ms | 313.7ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **109.4ms** | **3.5x** | 106.2ms | 3.6x | 381.6ms | 162.1ms | 311.0ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **352.1ms** | **10.1x** | 357.6ms | 9.9x | 3.55s | 2.17s | 1.68s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **219.9ms** | **5.4x** | 221.3ms | 5.4x | 1.20s | 465.9ms | 486.1ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **231.5ms** | **5.3x** | 226.6ms | 5.4x | 1.23s | 269.0ms | 498.3ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **114.0ms** | **3.8x** | 114.6ms | 3.8x | 431.0ms | 209.8ms | 341.5ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **157.2ms** | **2.5x** | 153.1ms | 2.6x | 392.8ms | 171.4ms | 319.4ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **106.8ms** | **3.6x** | 102.5ms | 3.7x | 379.5ms | 167.8ms | 308.5ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **174.9ms** | **2.3x** | 171.3ms | 2.4x | 404.5ms | 180.9ms | 318.3ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **157.6ms** | **2.4x** | 158.6ms | 2.4x | 385.8ms | 167.3ms | 313.7ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **160.1ms** | **2.4x** | 156.7ms | 2.4x | 383.1ms | 167.1ms | 318.2ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|------|------|------|------|------|------|------|
| **2.4 GB/s** | **57.1x** | 2.4 GB/s | 57.1x | 42 MB/s | 194 MB/s | 106 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **5.0x** | 5.0x | 2.4x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
