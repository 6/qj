# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools -- --type json`. Do not edit manually.
> Last updated: 2026-02-16T23:41:12Z on `Apple M4 Pro (48 GB)` (total time: 391s)

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|--------|------|------:|------:|------:|------:|------:|------:|------:|
| `-c '.'` | large_twitter.json | **41.1ms** | **29.3x** | 42.0ms | 28.7x | 1.21s | 326.8ms | 473.9ms |
| `-c '.statuses'` | large_twitter.json | **216.4ms** | **5.4x** | 254.6ms | 4.6x | 1.17s | 251.0ms | 582.2ms |
| `'.statuses|length'` | large_twitter.json | **29.9ms** | **12.2x** | 31.2ms | 11.7x | 364.4ms | 158.7ms | 298.6ms |
| `-c 'keys'` | large_twitter.json | **34.4ms** | **10.8x** | 34.4ms | 10.8x | 372.8ms | 183.7ms | 311.4ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **97.2ms** | **4.1x** | 98.9ms | 4.0x | 397.4ms | 154.4ms | 311.1ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **36.8ms** | **10.4x** | 36.8ms | 10.4x | 384.3ms | 165.1ms | 323.5ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **49.3ms** | **13.7x** | 48.8ms | 13.8x | 674.9ms | 200.3ms | 358.8ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **59.5ms** | **11.9x** | 56.3ms | 12.5x | 705.5ms | 211.8ms | 381.1ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **36.0ms** | **10.5x** | 36.0ms | 10.5x | 377.5ms | 175.7ms | 312.4ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **36.0ms** | **10.4x** | 35.9ms | 10.5x | 375.9ms | 160.5ms | 310.1ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **118.6ms** | **3.2x** | 118.3ms | 3.2x | 381.6ms | 176.7ms | 325.4ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **121.3ms** | **3.1x** | 120.7ms | 3.2x | 380.4ms | 159.1ms | 322.4ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **106.4ms** | **3.7x** | 102.0ms | 3.9x | 396.7ms | 194.8ms | 315.6ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **166.6ms** | **2.4x** | 167.2ms | 2.4x | 403.0ms | 170.9ms | 325.9ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **348.1ms** | **4.1x** | 359.2ms | 4.0x | 1.42s | 1.37s | 1.59s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **163.4ms** | **3.0x** | 165.1ms | 3.0x | 493.1ms | 211.8ms | 347.3ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **157.3ms** | **2.4x** | 152.9ms | 2.5x | 383.6ms | 232.8ms | 313.2ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **162.6ms** | **2.5x** | 156.3ms | 2.6x | 400.5ms | 196.1ms | 363.6ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **49.6ms** | **6.5x** | 46.5ms | 7.0x | 323.7ms | 109.8ms | 252.0ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **110.7ms** | **3.4x** | 108.3ms | 3.5x | 380.5ms | 164.6ms | 310.2ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **112.2ms** | **3.4x** | 111.6ms | 3.4x | 383.8ms | 163.9ms | 309.6ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **361.8ms** | **10.3x** | 358.9ms | 10.4x | 3.73s | 2.36s | 1.63s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **230.5ms** | **5.7x** | 230.1ms | 5.7x | 1.31s | 297.1ms | 535.9ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **230.9ms** | **5.3x** | 219.0ms | 5.6x | 1.22s | 259.1ms | 498.5ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **117.0ms** | **3.7x** | 113.6ms | 3.8x | 431.2ms | 205.6ms | 339.6ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **211.9ms** | **2.2x** | 152.6ms | 3.0x | 464.7ms | 171.0ms | 372.2ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **102.9ms** | **3.7x** | 163.9ms | 2.3x | 379.8ms | 162.3ms | 316.9ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **209.1ms** | **1.9x** | 201.6ms | 2.0x | 394.0ms | 183.1ms | 318.5ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **164.6ms** | **2.4x** | 160.2ms | 2.4x | 389.9ms | 172.0ms | 314.0ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **154.3ms** | **2.4x** | 152.8ms | 2.4x | 371.9ms | 159.9ms | 305.9ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|------|------|------|------|------|------|------|
| **1.2 GB/s** | **29.3x** | 1.1 GB/s | 28.7x | 41 MB/s | 150 MB/s | 103 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **5.0x** | 5.0x | 2.4x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
