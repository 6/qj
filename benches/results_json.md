# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools -- --type json`. Do not edit manually.
> Last updated: 2026-02-16 on `Apple M4 Pro (48 GB)`

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|--------|------|------:|------:|------:|------:|------:|------:|------:|
| `-c '.'` | large_twitter.json | **94.6ms** | **12.2x** | 95.5ms | 12.1x | 1.15s | 252.1ms | 463.3ms |
| `-c '.statuses'` | large_twitter.json | **218.0ms** | **5.3x** | 211.9ms | 5.5x | 1.16s | 246.7ms | 467.8ms |
| `'.statuses|length'` | large_twitter.json | **35.1ms** | **10.5x** | 35.6ms | 10.4x | 369.8ms | 152.8ms | 303.0ms |
| `-c 'keys'` | large_twitter.json | **34.6ms** | **10.6x** | 36.5ms | 10.1x | 367.5ms | 155.1ms | 303.5ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **105.1ms** | **3.6x** | 105.5ms | 3.6x | 382.5ms | 157.2ms | 322.7ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **39.3ms** | **9.7x** | 43.6ms | 8.8x | 382.3ms | 165.5ms | 311.5ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **48.3ms** | **13.6x** | 50.0ms | 13.1x | 655.4ms | 197.5ms | 364.3ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **59.0ms** | **11.8x** | 57.2ms | 12.2x | 698.5ms | 231.8ms | 370.7ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **35.8ms** | **10.2x** | 34.7ms | 10.6x | 366.8ms | 175.3ms | 308.1ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **37.7ms** | **9.9x** | 37.2ms | 10.1x | 374.8ms | 155.6ms | 365.9ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **118.3ms** | **3.3x** | 118.5ms | 3.3x | 392.4ms | 171.6ms | 319.9ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **80.7ms** | **4.3x** | 74.8ms | 4.7x | 348.7ms | 128.4ms | 277.4ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **111.4ms** | **3.5x** | 105.9ms | 3.7x | 392.7ms | 201.2ms | 491.1ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **164.1ms** | **2.4x** | 164.6ms | 2.4x | 388.7ms | 162.3ms | 311.3ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **322.7ms** | **4.3x** | 321.4ms | 4.3x | 1.39s | 1.36s | 1.56s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **161.7ms** | **2.3x** | 156.3ms | 2.4x | 369.5ms | 156.3ms | 304.4ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **152.3ms** | **2.4x** | 155.1ms | 2.4x | 368.2ms | 160.0ms | 309.5ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **215.2ms** | **1.8x** | 201.5ms | 1.9x | 378.4ms | 210.8ms | 303.3ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **107.3ms** | **3.5x** | 104.9ms | 3.6x | 376.0ms | 163.5ms | 301.1ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **110.5ms** | **3.5x** | 108.9ms | 3.5x | 381.2ms | 163.6ms | 312.5ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **108.1ms** | **3.5x** | 109.4ms | 3.5x | 378.5ms | 164.4ms | 308.6ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **358.2ms** | **9.9x** | 360.0ms | 9.8x | 3.53s | 2.11s | 1.62s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **215.7ms** | **7.4x** | 213.8ms | 7.5x | 1.61s | 250.7ms | 474.1ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **226.2ms** | **5.3x** | 223.8ms | 5.4x | 1.20s | 263.4ms | 497.8ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **104.9ms** | **4.0x** | 223.2ms | 1.9x | 422.4ms | 193.3ms | 327.5ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **157.0ms** | **2.5x** | 149.8ms | 2.6x | 390.9ms | 170.0ms | 316.0ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **108.1ms** | **3.6x** | 105.2ms | 3.7x | 388.6ms | 168.7ms | 309.2ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **172.2ms** | **2.3x** | 170.8ms | 2.3x | 397.3ms | 179.5ms | 317.8ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **166.9ms** | **2.3x** | 165.8ms | 2.3x | 386.9ms | 164.7ms | 313.0ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **153.5ms** | **2.4x** | 156.9ms | 2.4x | 374.0ms | 159.2ms | 309.3ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|------|------|------|------|------|------|------|
| **517 MB/s** | **12.2x** | 512 MB/s | 12.1x | 42 MB/s | 194 MB/s | 106 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **4.7x** | 4.6x | 2.5x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
