# Benchmarks

> Auto-generated by `cargo run --release --bin bench_tools -- --type json`. Do not edit manually.
> Last updated: 2026-02-16T22:08:15Z on `Apple M4 Pro (48 GB)` (total time: 373s)

All benchmarks: warm cache (`--warmup 1`), 3 runs, output to pipe.
Median of 3 runs via [hyperfine](https://github.com/sharkdp/hyperfine).

| Filter | File | **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|--------|------|------:|------:|------:|------:|------:|------:|------:|
| `-c '.'` | large_twitter.json | **42.6ms** | **27.1x** | 44.2ms | 26.1x | 1.16s | 248.6ms | 468.9ms |
| `-c '.statuses'` | large_twitter.json | **219.9ms** | **5.3x** | 207.2ms | 5.6x | 1.16s | 253.6ms | 469.1ms |
| `'.statuses|length'` | large_twitter.json | **34.8ms** | **10.6x** | 33.8ms | 10.9x | 367.7ms | 155.2ms | 300.8ms |
| `-c 'keys'` | large_twitter.json | **33.1ms** | **11.0x** | 34.1ms | 10.7x | 364.5ms | 158.6ms | 304.8ms |
| `'.statuses[]|.user.name'` | large_twitter.json | **103.9ms** | **3.6x** | 101.3ms | 3.7x | 375.0ms | 164.2ms | 309.7ms |
| `-c '.statuses[]|.user.name'` | large_twitter.json | **37.6ms** | **10.0x** | 37.5ms | 10.1x | 376.7ms | 167.5ms | 313.7ms |
| `-c '.statuses|map(.user)'` | large_twitter.json | **54.8ms** | **12.0x** | 53.5ms | 12.3x | 657.3ms | 197.2ms | 363.7ms |
| `-c '.statuses|map({user, text})'` | large_twitter.json | **<0.1ms** | **-** | <0.1ms | - | 629.2ms | 146.6ms | 310.7ms |
| `-c '.statuses|map(type)'` | large_twitter.json | **38.7ms** | **11.3x** | 39.1ms | 11.1x | 435.1ms | 199.9ms | 321.9ms |
| `-c '.statuses|map(length)'` | large_twitter.json | **34.9ms** | **10.6x** | 33.8ms | 10.9x | 369.5ms | 159.5ms | 306.9ms |
| `'.statuses[]|select(.retweet_count>0)|{user:.user.screen_name,n:.retweet_count}'` | large_twitter.json | **120.1ms** | **3.2x** | 115.2ms | 3.3x | 382.7ms | 172.2ms | 320.4ms |
| `'[.statuses[]|.retweet_count|floor]'` | large_twitter.json | **110.9ms** | **3.3x** | 108.4ms | 3.4x | 368.4ms | 159.2ms | 306.7ms |
| `'[.statuses[]|.user.screen_name|split("_")|join("-")]'` | large_twitter.json | **106.5ms** | **3.6x** | 104.8ms | 3.7x | 386.5ms | 193.3ms | 307.7ms |
| `'[.statuses[]|.user.screen_name]|unique|length'` | large_twitter.json | **162.9ms** | **2.4x** | 158.8ms | 2.4x | 383.1ms | 164.0ms | 307.5ms |
| `'[paths(scalars)]|length'` | large_twitter.json | **355.3ms** | **3.9x** | 318.2ms | 4.3x | 1.38s | 1.36s | 1.57s |
| `'.statuses[0]|map_values(tojson)'` | large_twitter.json | **163.8ms** | **2.2x** | 156.3ms | 2.3x | 363.7ms | 155.5ms | 302.6ms |
| `'reduce .statuses[] as $s (0; . + $s.retweet_count)'` | large_twitter.json | **155.1ms** | **2.4x** | 150.4ms | 2.5x | 371.3ms | 161.8ms | 301.9ms |
| `'.statuses[] | . as $s | {name: $s.user.screen_name, rts: $s.retweet_count}'` | large_twitter.json | **155.4ms** | **2.5x** | 154.0ms | 2.5x | 389.4ms | 172.4ms | 320.7ms |
| `'[.statuses[].user.screen_name][:5]'` | large_twitter.json | **107.5ms** | **3.5x** | 103.8ms | 3.6x | 374.6ms | 161.2ms | 306.3ms |
| `'[.statuses[] | try (1 / .retweet_count)]'` | large_twitter.json | **109.8ms** | **3.5x** | 107.9ms | 3.5x | 379.3ms | 159.6ms | 308.3ms |
| `'[.statuses[] | if .retweet_count > 10 then "viral" elif .retweet_count > 0 then "shared" else "original" end]'` | large_twitter.json | **108.6ms** | **3.4x** | 108.2ms | 3.5x | 374.1ms | 162.5ms | 307.6ms |
| `-c 'walk(if type == "boolean" then not else . end)'` | large_twitter.json | **355.7ms** | **9.9x** | 351.5ms | 10.0x | 3.52s | 2.13s | 1.63s |
| `-c '.statuses[0].retweet_count |= . + 1'` | large_twitter.json | **215.0ms** | **6.0x** | 215.6ms | 5.9x | 1.28s | 255.9ms | 471.4ms |
| `-c '.statuses[] |= (.retweet_count += 1)'` | large_twitter.json | **228.2ms** | **5.3x** | 220.7ms | 5.5x | 1.21s | 260.2ms | 511.9ms |
| `-c '[.statuses[]|.user.screen_name|gsub("_"; "-")]'` | large_twitter.json | **130.2ms** | **3.5x** | 109.7ms | 4.2x | 455.8ms | 224.0ms | 332.5ms |
| `-c '[.statuses[]|"@\(.user.screen_name): \(.text[0:30])"]'` | large_twitter.json | **150.7ms** | **2.6x** | 150.1ms | 2.6x | 393.1ms | 168.5ms | 319.6ms |
| `-c '[.statuses[]|.user.screen_name|@base64]'` | large_twitter.json | **102.0ms** | **3.7x** | 104.8ms | 3.6x | 379.6ms | 164.8ms | 307.1ms |
| `'.statuses | group_by(.user.screen_name) | length'` | large_twitter.json | **173.3ms** | **2.2x** | 172.4ms | 2.3x | 389.7ms | 181.2ms | 315.5ms |
| `-c '.statuses | sort_by(.retweet_count) | .[-1].user.screen_name'` | large_twitter.json | **163.4ms** | **2.3x** | 162.9ms | 2.4x | 383.8ms | 171.7ms | 307.5ms |
| `-c 'def hi(rt): if rt > 10 then "viral" elif rt > 0 then "shared" else "none" end; [.statuses[] | hi(.retweet_count)]'` | large_twitter.json | **162.0ms** | **2.3x** | 158.1ms | 2.3x | 370.9ms | 163.7ms | 305.1ms |

### Throughput

Peak parse throughput (`-c '.'` on large_twitter.json, 49MB):

| **qj** | vs jq | qj (1T) | vs jq | jq | jaq | gojq |
|------|------|------|------|------|------|------|
| **1.1 GB/s** | **27.1x** | 1.1 GB/s | 26.1x | 42 MB/s | 197 MB/s | 104 MB/s |

### Summary (times faster than jq)

| Category | **qj** | qj (1T) | jaq | gojq |
|----------|------|------|------|------|
| JSON (large_twitter.json) | **4.6x** | 4.8x | 2.5x | 1.4x |

Geometric mean of per-filter speedups (median time). Higher is better.
